<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project: /home/runner/work/AliceO2/AliceO2/Detectors/TOF/calibration/src/TOFChannelCalibrator.cxx Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../o2_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d9/dff/TOFChannelCalibrator_8cxx_source.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">TOFChannelCalibrator.cxx</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d9/dff/TOFChannelCalibrator_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright CERN and copyright holders of ALICE O2. This software is</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// distributed under the terms of the GNU General Public License v3 (GPL</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Version 3), copied verbatim in the file &quot;COPYING&quot;.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// See http://alice-o2.web.cern.ch/license for full licensing information.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// In applying this license CERN does not waive the privileges and immunities</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// granted to it by virtue of its status as an Intergovernmental Organization</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// or submit itself to any jurisdiction.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160; </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/dc2/TOFChannelCalibrator_8h.html">TOFCalibration/TOFChannelCalibrator.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/da4/Logger_8h.html">Framework/Logger.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;TStopwatch.h&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160; </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../d4/d7c/namespaceo2.html">o2</a></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;{</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">namespace </span>tof</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;{</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">using</span> <a class="code" href="../../d8/df5/classo2_1_1calibration_1_1TimeSlot.html">Slot</a> = <a class="code" href="../../d8/df5/classo2_1_1calibration_1_1TimeSlot.html">o2::calibration::TimeSlot&lt;o2::tof::TOFChannelData&gt;</a>;</div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="../../d7/dae/namespaceo2_1_1tof.html#a3973e777d569ad62c68b4d7dcbbb657d">   24</a></span>&#160;<span class="keyword">using</span> <a class="code" href="../../d2/dde/classo2_1_1dataformats_1_1CalibTimeSlewingParamTOF.html">TimeSlewing</a> = <a class="code" href="../../d2/dde/classo2_1_1dataformats_1_1CalibTimeSlewingParamTOF.html">o2::dataformats::CalibTimeSlewingParamTOF</a>;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">using</span> <a class="code" href="../../d1/d7c/structo2_1_1calibration_1_1Utils.html">clbUtils</a> = <a class="code" href="../../d1/d7c/structo2_1_1calibration_1_1Utils.html">o2::calibration::Utils</a>;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">using</span> boost::histogram::indexed;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">using namespace </span><a class="code" href="../../d7/dae/namespaceo2_1_1tof.html">o2::tof</a>;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">//using boost::histogram::algorithm; // not sure why it does not work...</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">//_____________________________________________</span></div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a06add85eec10c887c41817a821735a5a">   31</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a06add85eec10c887c41817a821735a5a">TOFChannelData::fill</a>(<span class="keyword">const</span> gsl::span&lt;const o2::dataformats::CalibInfoTOF&gt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>)</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;{</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="comment">// fill container</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.size(); <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>--;) {</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="keyword">auto</span> ch = <a class="code" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].getTOFChIndex();</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="keywordtype">int</span> sector = ch / <a class="code" href="../../d7/d70/classo2_1_1tof_1_1Geo.html#a926ba139cfed8d51e3f31a7fa840a25f">Geo::NPADSXSECTOR</a>;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keywordtype">int</span> chInSect = ch % <a class="code" href="../../d7/d70/classo2_1_1tof_1_1Geo.html#a926ba139cfed8d51e3f31a7fa840a25f">Geo::NPADSXSECTOR</a>;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keyword">auto</span> dt = <a class="code" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].getDeltaTimePi();</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keyword">auto</span> tot = <a class="code" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].getTot();</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="comment">// TO BE DISCUSSED: could it be that the LHCphase is too old? If we ar ein sync mode, it could be that it is not yet created for the current run, so the one from the previous run (which could be very old) is used. But maybe it does not matter much, since soon enough a calibrated LHC phase should be produced</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keyword">auto</span> corr = mCalibTOFapi-&gt;<a class="code" href="../../d9/d0d/classo2_1_1tof_1_1CalibTOFapi.html#a785c71a70e06703e36dd6d4d08581449">getTimeCalibration</a>(ch, tot); <span class="comment">// we take into account LHCphase, offsets and time slewing</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(DEBUG) &lt;&lt; <span class="stringliteral">&quot;inserting in channel &quot;</span> &lt;&lt; ch &lt;&lt; <span class="stringliteral">&quot;: dt = &quot;</span> &lt;&lt; dt &lt;&lt; <span class="stringliteral">&quot;, tot = &quot;</span> &lt;&lt; tot &lt;&lt; <span class="stringliteral">&quot;, corr = &quot;</span> &lt;&lt; corr &lt;&lt; <span class="stringliteral">&quot;, corrected dt = &quot;</span> &lt;&lt; dt - corr;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    dt -= corr;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    mHisto[sector](dt, chInSect); <span class="comment">// we pass the calibrated time</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    mEntries[ch] += 1;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  }</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;}</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">//_____________________________________________</span></div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a7275108ac647cf2263c76534eadcc94f">   53</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a06add85eec10c887c41817a821735a5a">TOFChannelData::fill</a>(<span class="keyword">const</span> gsl::span&lt;const o2::tof::CalibInfoCluster&gt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>)</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;{</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="comment">// fill container</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>.size(); <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>--;) {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keyword">auto</span> ch = <a class="code" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].getCH();</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keyword">auto</span> dch = <a class="code" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].getDCH(); <span class="comment">// this is a char! if you print it, you need to cast it to int</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keyword">auto</span> dt = <a class="code" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].getDT();</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keyword">auto</span> tot1 = <a class="code" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].getTOT1();</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keyword">auto</span> tot2 = <a class="code" href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].getTOT2();</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment">// we order them so that the channel number of the first cluster is smaller than</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">// the one of the second cluster</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">if</span> (dch &lt; 0) {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      ch += dch;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      dt = -dt;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      dch = -dch;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      <span class="keywordtype">float</span> inv = tot1;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      tot1 = tot2;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      tot2 = inv;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordtype">int</span> sector = ch / <a class="code" href="../../d7/d70/classo2_1_1tof_1_1Geo.html#a926ba139cfed8d51e3f31a7fa840a25f">Geo::NPADSXSECTOR</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordtype">int</span> absoluteStrip = ch / <a class="code" href="../../d7/d70/classo2_1_1tof_1_1Geo.html#a5d8b7a738f21dab9a08dc53c5de6d5fe">Geo::NPADS</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordtype">int</span> stripInSect = absoluteStrip % <a class="code" href="../../d7/d70/classo2_1_1tof_1_1Geo.html#a52f130aea4ceee8757a03e4adbefad92">Geo::NSTRIPXSECTOR</a>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordtype">int</span> shift = 0;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">if</span> (dch == 1) {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      shift = 0; <span class="comment">// 2nd channel is on the right</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dch == 48) {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      shift = 1; <span class="comment">// 2nd channel is at the top</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordtype">int</span> chOnStrip = ch % 96;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordtype">int</span> comb = 96 * shift + chOnStrip; <span class="comment">// index of the current pair of clusters on the strip; there are in total 96 + 48</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keyword">auto</span> corr1 = mCalibTOFapi-&gt;<a class="code" href="../../d9/d0d/classo2_1_1tof_1_1CalibTOFapi.html#a785c71a70e06703e36dd6d4d08581449">getTimeCalibration</a>(ch, tot1);       <span class="comment">// we take into account LHCphase, offsets and time slewing</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keyword">auto</span> corr2 = mCalibTOFapi-&gt;<a class="code" href="../../d9/d0d/classo2_1_1tof_1_1CalibTOFapi.html#a785c71a70e06703e36dd6d4d08581449">getTimeCalibration</a>(ch + dch, tot2); <span class="comment">// we take into account LHCphase, offsets and time slewing</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(DEBUG) &lt;&lt; <span class="stringliteral">&quot;inserting in channel &quot;</span> &lt;&lt; ch &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; ch + dch &lt;&lt; <span class="stringliteral">&quot;: dt = &quot;</span> &lt;&lt; dt &lt;&lt; <span class="stringliteral">&quot;, tot1 = &quot;</span> &lt;&lt; tot1 &lt;&lt; <span class="stringliteral">&quot;, tot2 = &quot;</span> &lt;&lt; tot2 &lt;&lt; <span class="stringliteral">&quot;, corr1 = &quot;</span> &lt;&lt; corr1 &lt;&lt; <span class="stringliteral">&quot;, corr2 = &quot;</span> &lt;&lt; corr2 &lt;&lt; <span class="stringliteral">&quot;, corrected dt = &quot;</span> &lt;&lt; dt - corr1 + corr2;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    dt -= corr1 - corr2;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordtype">int</span> combInSect = comb + stripInSect * <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a0d278f986cbaae17e4af336f2431f89f">NCOMBINSTRIP</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(DEBUG) &lt;&lt; <span class="stringliteral">&quot;ch = &quot;</span> &lt;&lt; ch &lt;&lt; <span class="stringliteral">&quot;, sector = &quot;</span> &lt;&lt; sector &lt;&lt; <span class="stringliteral">&quot;, absoluteStrip = &quot;</span> &lt;&lt; absoluteStrip &lt;&lt; <span class="stringliteral">&quot;, stripInSect = &quot;</span> &lt;&lt; stripInSect &lt;&lt; <span class="stringliteral">&quot;, shift = &quot;</span> &lt;&lt; shift &lt;&lt; <span class="stringliteral">&quot;, dch = &quot;</span> &lt;&lt; (<a class="code" href="../../df/d73/namespaceo2_1_1its_1_1gpu_1_1utils_1_1device.html#a4679f96aa931479958ac05d8c19002de">int</a>)dch &lt;&lt; <span class="stringliteral">&quot;, chOnStrip = &quot;</span> &lt;&lt; chOnStrip &lt;&lt; <span class="stringliteral">&quot;, comb = &quot;</span> &lt;&lt; comb;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    mHisto[sector](dt, combInSect); <span class="comment">// we pass the difference of the *calibrated* times</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    mEntries[comb + <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a0d278f986cbaae17e4af336f2431f89f">NCOMBINSTRIP</a> * absoluteStrip] += 1;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">//_____________________________________________</span></div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#ae6857148899e64edd5017e78eea7c0ca">  104</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#ae6857148899e64edd5017e78eea7c0ca">TOFChannelData::merge</a>(<span class="keyword">const</span> <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html">TOFChannelData</a>* prev)</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;{</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">// merge data of 2 slots</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> isect = 0; isect &lt; <a class="code" href="../../d7/d70/classo2_1_1tof_1_1Geo.html#a1b8f91c6018f30830cdb591dc84244bb">Geo::NSECTORS</a>; isect++) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    mHisto[isect] += prev-&gt;<a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a1777d0fe702c095d9819568246bc63cf">getHisto</a>(isect);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> iel = 0; iel &lt; mEntries.size(); iel++) {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    mEntries[iel] += prev-&gt;mEntries[iel];</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">//_____________________________________________</span></div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#aec9a4bf9c9cd1a976392f5ee9c0ef343">  116</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#aec9a4bf9c9cd1a976392f5ee9c0ef343">TOFChannelData::hasEnoughData</a>(<span class="keywordtype">int</span> minEntries)<span class="keyword"> const</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">// true if all channels can be fitted --&gt; have enough statistics</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="comment">// We consider that we have enough entries if the mean of the number of entries in the channels</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="comment">// with at least one entry is greater than the cut at &quot;minEntries&quot;</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="comment">// Channels/pairs with zero entries are assumed to be off --&gt; we do not consider them</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="comment">//printEntries();</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordtype">int</span> nValid = 0;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordtype">float</span> mean = 0;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordtype">int</span> smallestElementIndex = -1;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordtype">int</span> smallestEntries = 1e5;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordtype">int</span> largestElementIndex = -1;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordtype">int</span> largestEntries = 0;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mEntries.size(); ++<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">if</span> (mEntries[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] != 0) { <span class="comment">// skipping channels/pairs if they have zero entries (most likely they are simply off)</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      mean += mEntries[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      ++nValid;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <span class="keywordflow">if</span> (mEntries[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt; smallestEntries) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        smallestEntries = mEntries[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        smallestElementIndex = <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <span class="keywordflow">if</span> (mEntries[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt; largestEntries) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        largestEntries = mEntries[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        largestElementIndex = <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordflow">if</span> (nValid == 0) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;hasEnough = false: all channels/pairs are empty&quot;</span>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(DEBUG) &lt;&lt; <span class="stringliteral">&quot;mean = &quot;</span> &lt;&lt; mean &lt;&lt; <span class="stringliteral">&quot;, nvalid = &quot;</span> &lt;&lt; nValid;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  mean /= nValid;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(DEBUG) &lt;&lt; <span class="stringliteral">&quot;minElement is at position &quot;</span> &lt;&lt; smallestElementIndex &lt;&lt; <span class="stringliteral">&quot; and has &quot;</span> &lt;&lt; smallestEntries &lt;&lt; <span class="stringliteral">&quot; entries&quot;</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(DEBUG) &lt;&lt; <span class="stringliteral">&quot;maxElement is at position &quot;</span> &lt;&lt; largestElementIndex &lt;&lt; <span class="stringliteral">&quot; and has &quot;</span> &lt;&lt; largestEntries &lt;&lt; <span class="stringliteral">&quot; entries&quot;</span>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordtype">float</span> threshold = minEntries + 5 * std::sqrt(minEntries);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordtype">bool</span> enough = mean &lt; threshold ? false : <span class="keyword">true</span>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="keywordflow">if</span> (enough) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;hasEnough: &quot;</span> &lt;&lt; (<a class="code" href="../../df/d73/namespaceo2_1_1its_1_1gpu_1_1utils_1_1device.html#a4679f96aa931479958ac05d8c19002de">int</a>)enough &lt;&lt; <span class="stringliteral">&quot; (&quot;</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;              &lt;&lt; nValid &lt;&lt; <span class="stringliteral">&quot; valid channels found (should be &quot;</span> &lt;&lt; mEntries.size() &lt;&lt; <span class="stringliteral">&quot;) with mean = &quot;</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;              &lt;&lt; mean &lt;&lt; <span class="stringliteral">&quot; with cut at = &quot;</span> &lt;&lt; threshold &lt;&lt; <span class="stringliteral">&quot;) &quot;</span>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordflow">return</span> enough;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">//_____________________________________________</span></div>
<div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a91d2245fae116e7ebde1de0d43e9b062">  166</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a91d2245fae116e7ebde1de0d43e9b062">TOFChannelData::print</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;Printing histograms:&quot;</span>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  std::ostringstream os;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> isect = 0; isect &lt; <a class="code" href="../../d7/d70/classo2_1_1tof_1_1Geo.html#a1b8f91c6018f30830cdb591dc84244bb">Geo::NSECTORS</a>; isect++) {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;Sector: &quot;</span> &lt;&lt; isect;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    os &lt;&lt; mHisto[isect];</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keyword">auto</span> nentriesInSec = <a class="code" href="../../d0/d0a/namespaceo2_1_1tpc.html#aef2b3470d9c23d365364d3060d5f68a0">boost::histogram::algorithm::sum</a>(mHisto[isect]);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;Number of entries in histogram: &quot;</span> &lt;&lt; <a class="code" href="../../d0/d0a/namespaceo2_1_1tpc.html#aef2b3470d9c23d365364d3060d5f68a0">boost::histogram::algorithm::sum</a>(mHisto[isect]);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordtype">int</span> cnt = 0;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">if</span> (nentriesInSec != 0) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp;&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a> : indexed(mHisto[isect])) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>.get() &gt; 0) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>.index(0); <span class="comment">// current index along first axis --&gt; t-texp</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span> j = <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>.index(1); <span class="comment">// current index along second axis --&gt; channel</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span> b0 = <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>.bin(0);  <span class="comment">// current bin interval along first axis --&gt; t-texp</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span> b1 = <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>.bin(1);  <span class="comment">// current bin interval along second axis --&gt; channel</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;          <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;bin &quot;</span> &lt;&lt; cnt &lt;&lt; <span class="stringliteral">&quot;: channel = &quot;</span> &lt;&lt; j &lt;&lt; <span class="stringliteral">&quot; in [&quot;</span> &lt;&lt; b1.lower() &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; b1.upper()</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;], t-texp in [&quot;</span> &lt;&lt; b0.lower() &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; b0.upper() &lt;&lt; <span class="stringliteral">&quot;], has entries = &quot;</span> &lt;&lt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>.get();</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        cnt++;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(INFO) &lt;&lt; cnt &lt;&lt; <span class="stringliteral">&quot; bins inspected&quot;</span>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">//_____________________________________________</span></div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#ad1978708df097963b60d9ae805056522">  194</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a91d2245fae116e7ebde1de0d43e9b062">TOFChannelData::print</a>(<span class="keywordtype">int</span> isect)<span class="keyword"> const</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;*** Printing histogram &quot;</span> &lt;&lt; isect;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  std::ostringstream os;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordtype">int</span> cnt = 0;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  os &lt;&lt; mHisto[isect];</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;Number of entries in histogram: &quot;</span> &lt;&lt; <a class="code" href="../../d0/d0a/namespaceo2_1_1tpc.html#aef2b3470d9c23d365364d3060d5f68a0">boost::histogram::algorithm::sum</a>(mHisto[isect]);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp;&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a> : indexed(mHisto[isect])) { <span class="comment">// does not work also when I use indexed(*(mHisto[sector]))</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    cnt++;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(DEBUG) &lt;&lt; <span class="stringliteral">&quot; c &quot;</span> &lt;&lt; cnt &lt;&lt; <span class="stringliteral">&quot; i &quot;</span> &lt;&lt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>.index(0) &lt;&lt; <span class="stringliteral">&quot; j &quot;</span> &lt;&lt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>.index(1) &lt;&lt; <span class="stringliteral">&quot; b0 &quot;</span> &lt;&lt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>.bin(0) &lt;&lt; <span class="stringliteral">&quot; b1 &quot;</span> &lt;&lt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>.bin(1) &lt;&lt; <span class="stringliteral">&quot; val= &quot;</span> &lt;&lt; *<a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a> &lt;&lt; <span class="stringliteral">&quot;|&quot;</span> &lt;&lt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>.get();</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>.get() &gt; 0) {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;x = &quot;</span> &lt;&lt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>.get() &lt;&lt; <span class="stringliteral">&quot; c &quot;</span> &lt;&lt; cnt;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    }</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(INFO) &lt;&lt; cnt &lt;&lt; <span class="stringliteral">&quot; bins inspected&quot;</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">//_____________________________________________</span></div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#af539ee62d5961e7895bad7a627b20f89">  212</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#af539ee62d5961e7895bad7a627b20f89">TOFChannelData::printEntries</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="comment">// to print number of entries per channel</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mEntries.size(); ++<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">if</span> (mEntries.size() &gt; <a class="code" href="../../d7/d70/classo2_1_1tof_1_1Geo.html#ab8ab3733fc270083bb053f638332c733">tof::Geo::NCHANNELS</a>) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;pair of channels &quot;</span> &lt;&lt; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;&lt; <span class="stringliteral">&quot; has &quot;</span> &lt;&lt; mEntries[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt;&lt; <span class="stringliteral">&quot; entries&quot;</span>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(INFO) &lt;&lt; <span class="stringliteral">&quot;channel &quot;</span> &lt;&lt; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;&lt; <span class="stringliteral">&quot; has &quot;</span> &lt;&lt; mEntries[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt;&lt; <span class="stringliteral">&quot; entries&quot;</span>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">//_____________________________________________</span></div>
<div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a870978c60ce50506bf2737d65ad20cda">  225</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a870978c60ce50506bf2737d65ad20cda">TOFChannelData::findBin</a>(<span class="keywordtype">float</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>)<span class="keyword"> const</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="comment">// find the bin along the x-axis (with t-texp) where the value &quot;v&quot; is; this does not depend on the channel</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="comment">// (axis 1), nor on the sector, so we use sector0</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a> == mRange) {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a> -= 1.e-1;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(DEBUG) &lt;&lt; <span class="stringliteral">&quot;In FindBin, v = : &quot;</span> &lt;&lt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(DEBUG) &lt;&lt; <span class="stringliteral">&quot;bin0 limits: lower = &quot;</span> &lt;&lt; mHisto[0].axis(0).bin(0).lower() &lt;&lt; <span class="stringliteral">&quot;, upper = &quot;</span> &lt;&lt; mHisto[0].axis(0).bin(0).upper();</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(DEBUG) &lt;&lt; <span class="stringliteral">&quot;bin1000 limits: lower = &quot;</span> &lt;&lt; mHisto[0].axis(0).bin(mNBins - 1).lower() &lt;&lt; <span class="stringliteral">&quot;, upper = &quot;</span> &lt;&lt; mHisto[0].axis(0).bin(mNBins - 1).upper();</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(DEBUG) &lt;&lt; <span class="stringliteral">&quot;v = &quot;</span> &lt;&lt; <a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a> &lt;&lt; <span class="stringliteral">&quot; is in bin &quot;</span> &lt;&lt; mHisto[0].axis(0).index(<a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">return</span> mHisto[0].axis(0).index(<a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">//_____________________________________________</span></div>
<div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a614156c60d17bc95b9e04ea0f93a96f2">  243</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a614156c60d17bc95b9e04ea0f93a96f2">TOFChannelData::integral</a>(<span class="keywordtype">int</span> chmin, <span class="keywordtype">int</span> chmax, <span class="keywordtype">float</span> binmin, <span class="keywordtype">float</span> binmax)<span class="keyword"> const</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="comment">// calculates the integral in [chmin, chmax] and in [binmin, binmax]</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordflow">if</span> (binmin &lt; -mRange || binmax &gt; mRange || chmin &lt; 0 || chmax &gt;= <a class="code" href="../../d7/d70/classo2_1_1tof_1_1Geo.html#a1b8f91c6018f30830cdb591dc84244bb">Geo::NSECTORS</a> * mNElsPerSector) {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a08b2ccf173a847e0fd176f8af57da8a1">std::runtime_error</a>(<span class="stringliteral">&quot;Check your bins, we cannot calculate the integrals in under/overflows bins&quot;</span>);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">if</span> (binmax &lt; binmin || chmax &lt; chmin) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a08b2ccf173a847e0fd176f8af57da8a1">std::runtime_error</a>(<span class="stringliteral">&quot;Check your bin limits!&quot;</span>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordtype">int</span> sector = chmin / mNElsPerSector;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordflow">if</span> (sector != chmax / mNElsPerSector) {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a08b2ccf173a847e0fd176f8af57da8a1">std::runtime_error</a>(<span class="stringliteral">&quot;We cannot integrate over channels that belong to different sectors&quot;</span>);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordtype">int</span> chinsectormin = chmin % mNElsPerSector;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keywordtype">int</span> chinsectormax = chmax % mNElsPerSector;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordtype">float</span> res2 = 0;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="comment">//TStopwatch t3;</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordtype">int</span> ind = -1;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="keywordtype">int</span> binxmin = <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a870978c60ce50506bf2737d65ad20cda">findBin</a>(binmin);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordtype">int</span> binxmax = <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a870978c60ce50506bf2737d65ad20cda">findBin</a>(binmax);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(DEBUG) &lt;&lt; <span class="stringliteral">&quot;binxmin = &quot;</span> &lt;&lt; binxmin &lt;&lt; <span class="stringliteral">&quot;, binxmax = &quot;</span> &lt;&lt; binxmax;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="comment">//t3.Start();</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> j = chinsectormin; j &lt;= chinsectormax; ++j) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = binxmin; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= binxmax; ++<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a> = mHisto[sector].at(<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, j);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      res2 += <a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="comment">//t3.Stop();</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(DEBUG) &lt;&lt; <span class="stringliteral">&quot;Time for integral looping over axis (result = &quot;</span> &lt;&lt; res2 &lt;&lt; <span class="stringliteral">&quot;):&quot;</span>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="comment">//t3.Print();</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordflow">return</span> res2;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">//_____________________________________________</span></div>
<div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#ab54e9116e5ad021b0a607dae077ccc72">  284</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a614156c60d17bc95b9e04ea0f93a96f2">TOFChannelData::integral</a>(<span class="keywordtype">int</span> ch, <span class="keywordtype">float</span> binmin, <span class="keywordtype">float</span> binmax)<span class="keyword"> const</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="comment">// calculates the integral along one fixed channel and in [binmin, binmax]</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a614156c60d17bc95b9e04ea0f93a96f2">integral</a>(ch, ch, binmin, binmax);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">//_____________________________________________</span></div>
<div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a77bc188925de89b48ee9b7b0e807b31e">  292</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a614156c60d17bc95b9e04ea0f93a96f2">TOFChannelData::integral</a>(<span class="keywordtype">int</span> chmin, <span class="keywordtype">int</span> chmax, <span class="keywordtype">int</span> binxmin, <span class="keywordtype">int</span> binxmax)<span class="keyword"> const</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="comment">// calculates the integral in [chmin, chmax] and in [binmin, binmax]</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">if</span> (binxmin &lt; 0 || binxmax &gt; mNBins || chmin &lt; 0 || chmax &gt;= <a class="code" href="../../d7/d70/classo2_1_1tof_1_1Geo.html#a1b8f91c6018f30830cdb591dc84244bb">Geo::NSECTORS</a> * mNElsPerSector) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a08b2ccf173a847e0fd176f8af57da8a1">std::runtime_error</a>(<span class="stringliteral">&quot;Check your bins, we cannot calculate the integrals in under/overflows bins&quot;</span>);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">if</span> (binxmax &lt; binxmin || chmax &lt; chmin) {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a08b2ccf173a847e0fd176f8af57da8a1">std::runtime_error</a>(<span class="stringliteral">&quot;Check your bin limits!&quot;</span>);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordtype">int</span> sector = chmin / mNElsPerSector;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordflow">if</span> (sector != chmax / mNElsPerSector) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a08b2ccf173a847e0fd176f8af57da8a1">std::runtime_error</a>(<span class="stringliteral">&quot;We cannot integrate over channels that belong to different sectors&quot;</span>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordtype">int</span> chinsectormin = chmin % mNElsPerSector;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordtype">int</span> chinsectormax = chmax % mNElsPerSector;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordtype">float</span> res2 = 0;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="comment">//TStopwatch t3;</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="comment">//t3.Start();</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> j = chinsectormin; j &lt;= chinsectormax; ++j) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = binxmin; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= binxmax; ++<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a> = mHisto[sector].at(<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, j);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      res2 += <a class="code" href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="comment">//t3.Stop();</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <a class="code" href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a>(DEBUG) &lt;&lt; <span class="stringliteral">&quot;Time for integral looping over axis (result = &quot;</span> &lt;&lt; res2 &lt;&lt; <span class="stringliteral">&quot;):&quot;</span>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">//t3.Print();</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordflow">return</span> res2;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;}</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">//_____________________________________________</span></div>
<div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a9ae346a1679b7e611ddbeb5872c55ef3">  328</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a614156c60d17bc95b9e04ea0f93a96f2">TOFChannelData::integral</a>(<span class="keywordtype">int</span> ch, <span class="keywordtype">int</span> binxmin, <span class="keywordtype">int</span> binxmax)<span class="keyword"> const</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="comment">// calculates the integral along one fixed channel and in [binmin, binmax]</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a614156c60d17bc95b9e04ea0f93a96f2">integral</a>(ch, ch, binxmin, binxmax);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;}</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">//_____________________________________________</span></div>
<div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a7c50332d0130cb6aeda3e6358146fbe6">  336</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a614156c60d17bc95b9e04ea0f93a96f2">TOFChannelData::integral</a>(<span class="keywordtype">int</span> ch)<span class="keyword"> const</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="comment">// calculates the integral along one fixed channel and in the full x-range</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a614156c60d17bc95b9e04ea0f93a96f2">integral</a>(ch, ch, 0, mNBins - 1);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;}</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;} <span class="comment">// end namespace tof</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;} <span class="comment">// end namespace o2</span></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclasso2_1_1tof_1_1TOFChannelData_html"><div class="ttname"><a href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html">o2::tof::TOFChannelData</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dc2/TOFChannelCalibrator_8h_source.html#l00043">TOFChannelCalibrator.h:43</a></div></div>
<div class="ttc" id="aclasso2_1_1dataformats_1_1CalibTimeSlewingParamTOF_html"><div class="ttname"><a href="../../d2/dde/classo2_1_1dataformats_1_1CalibTimeSlewingParamTOF.html">o2::dataformats::CalibTimeSlewingParamTOF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d81/CalibTimeSlewingParamTOF_8h_source.html#l00025">CalibTimeSlewingParamTOF.h:25</a></div></div>
<div class="ttc" id="anamespaceo2_1_1tof_html"><div class="ttname"><a href="../../d7/dae/namespaceo2_1_1tof.html">o2::tof</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbc/SimTraits_8h_source.html#l00119">SimTraits.h:119</a></div></div>
<div class="ttc" id="aclasso2_1_1tof_1_1TOFChannelData_html_a614156c60d17bc95b9e04ea0f93a96f2"><div class="ttname"><a href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a614156c60d17bc95b9e04ea0f93a96f2">o2::tof::TOFChannelData::integral</a></div><div class="ttdeci">float integral(int chmin, int chmax, float binmin, float binmax) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dff/TOFChannelCalibrator_8cxx_source.html#l00243">TOFChannelCalibrator.cxx:243</a></div></div>
<div class="ttc" id="aclasso2_1_1tof_1_1TOFChannelData_html_a870978c60ce50506bf2737d65ad20cda"><div class="ttname"><a href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a870978c60ce50506bf2737d65ad20cda">o2::tof::TOFChannelData::findBin</a></div><div class="ttdeci">int findBin(float v) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dff/TOFChannelCalibrator_8cxx_source.html#l00225">TOFChannelCalibrator.cxx:225</a></div></div>
<div class="ttc" id="aclasso2_1_1tof_1_1TOFChannelData_html_ae6857148899e64edd5017e78eea7c0ca"><div class="ttname"><a href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#ae6857148899e64edd5017e78eea7c0ca">o2::tof::TOFChannelData::merge</a></div><div class="ttdeci">void merge(const TOFChannelData *prev)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dff/TOFChannelCalibrator_8cxx_source.html#l00104">TOFChannelCalibrator.cxx:104</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a4568fc090febc136eed4577a600739ca"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a4568fc090febc136eed4577a600739ca">v</a></div><div class="ttdeci">const GLdouble * v</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00832">glcorearb.h:832</a></div></div>
<div class="ttc" id="aGPUCommonAlgorithm_8h_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0b/GPUCommonAlgorithm_8h_source.html#l00411">GPUCommonAlgorithm.h:411</a></div></div>
<div class="ttc" id="anamespaceo2_html"><div class="ttname"><a href="../../d4/d7c/namespaceo2.html">o2</a></div><div class="ttdoc">information complementary to a CCDB object (path, metadata, startTimeValidity, endTimeValidity etc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d24/BitstreamReader_8h_source.html#l00022">BitstreamReader.h:22</a></div></div>
<div class="ttc" id="aclasso2_1_1tof_1_1TOFChannelData_html_a06add85eec10c887c41817a821735a5a"><div class="ttname"><a href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a06add85eec10c887c41817a821735a5a">o2::tof::TOFChannelData::fill</a></div><div class="ttdeci">void fill(const gsl::span&lt; const o2::dataformats::CalibInfoTOF &gt; data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dff/TOFChannelCalibrator_8cxx_source.html#l00031">TOFChannelCalibrator.cxx:31</a></div></div>
<div class="ttc" id="aclasso2_1_1tof_1_1TOFChannelData_html_a91d2245fae116e7ebde1de0d43e9b062"><div class="ttname"><a href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a91d2245fae116e7ebde1de0d43e9b062">o2::tof::TOFChannelData::print</a></div><div class="ttdeci">void print() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dff/TOFChannelCalibrator_8cxx_source.html#l00166">TOFChannelCalibrator.cxx:166</a></div></div>
<div class="ttc" id="anamespaceo2_1_1its_1_1gpu_1_1utils_1_1device_html_a4679f96aa931479958ac05d8c19002de"><div class="ttname"><a href="../../df/d73/namespaceo2_1_1its_1_1gpu_1_1utils_1_1device.html#a4679f96aa931479958ac05d8c19002de">o2::its::gpu::utils::device::int</a></div><div class="ttdeci">const int</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/def/Detectors_2ITSMFT_2ITS_2tracking_2cuda_2include_2ITStrackingCUDA_2Utils_8h_source.html#l00057">Utils.h:57</a></div></div>
<div class="ttc" id="aTOFChannelCalibrator_8h_html"><div class="ttname"><a href="../../db/dc2/TOFChannelCalibrator_8h.html">TOFChannelCalibrator.h</a></div></div>
<div class="ttc" id="aclasso2_1_1tof_1_1Geo_html_ab8ab3733fc270083bb053f638332c733"><div class="ttname"><a href="../../d7/d70/classo2_1_1tof_1_1Geo.html#ab8ab3733fc270083bb053f638332c733">o2::tof::Geo::NCHANNELS</a></div><div class="ttdeci">static constexpr int NCHANNELS</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9f/TOF_2base_2include_2TOFBase_2Geo_8h_source.html#l00086">Geo.h:86</a></div></div>
<div class="ttc" id="aLogger_8h_html"><div class="ttname"><a href="../../dd/da4/Logger_8h.html">Logger.h</a></div></div>
<div class="ttc" id="aclasso2_1_1tof_1_1TOFChannelData_html_a0d278f986cbaae17e4af336f2431f89f"><div class="ttname"><a href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a0d278f986cbaae17e4af336f2431f89f">o2::tof::TOFChannelData::NCOMBINSTRIP</a></div><div class="ttdeci">static constexpr int NCOMBINSTRIP</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dc2/TOFChannelCalibrator_8h_source.html#l00051">TOFChannelCalibrator.h:51</a></div></div>
<div class="ttc" id="anamespaceo2_1_1tpc_html_aef2b3470d9c23d365364d3060d5f68a0"><div class="ttname"><a href="../../d0/d0a/namespaceo2_1_1tpc.html#aef2b3470d9c23d365364d3060d5f68a0">o2::tpc::sum</a></div><div class="ttdeci">DataT sum(const Vector&lt; DataT, N &gt; &amp;a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d54/TPC_2spacecharge_2include_2TPCSpaceCharge_2Vector_8h_source.html#l00136">Vector.h:136</a></div></div>
<div class="ttc" id="aclasso2_1_1tof_1_1TOFChannelData_html_a1777d0fe702c095d9819568246bc63cf"><div class="ttname"><a href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#a1777d0fe702c095d9819568246bc63cf">o2::tof::TOFChannelData::getHisto</a></div><div class="ttdeci">boostHisto &amp; getHisto(int isect)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dc2/TOFChannelCalibrator_8h_source.html#l00093">TOFChannelCalibrator.h:93</a></div></div>
<div class="ttc" id="anamespaceo2_1_1framework_html_a08b2ccf173a847e0fd176f8af57da8a1"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#a08b2ccf173a847e0fd176f8af57da8a1">o2::framework::runtime_error</a></div><div class="ttdeci">RuntimeErrorRef runtime_error(const char *)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da4/RuntimeError_8cxx_source.html#l00068">RuntimeError.cxx:68</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a0cdec8e97a75ee9458b23d152bf962d4"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a></div><div class="ttdeci">GLint GLenum GLint x</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00403">glcorearb.h:403</a></div></div>
<div class="ttc" id="aclasso2_1_1tof_1_1Geo_html_a52f130aea4ceee8757a03e4adbefad92"><div class="ttname"><a href="../../d7/d70/classo2_1_1tof_1_1Geo.html#a52f130aea4ceee8757a03e4adbefad92">o2::tof::Geo::NSTRIPXSECTOR</a></div><div class="ttdeci">static constexpr Int_t NSTRIPXSECTOR</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9f/TOF_2base_2include_2TOFBase_2Geo_8h_source.html#l00079">Geo.h:79</a></div></div>
<div class="ttc" id="aclasso2_1_1tof_1_1Geo_html_a926ba139cfed8d51e3f31a7fa840a25f"><div class="ttname"><a href="../../d7/d70/classo2_1_1tof_1_1Geo.html#a926ba139cfed8d51e3f31a7fa840a25f">o2::tof::Geo::NPADSXSECTOR</a></div><div class="ttdeci">static constexpr Int_t NPADSXSECTOR</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9f/TOF_2base_2include_2TOFBase_2Geo_8h_source.html#l00080">Geo.h:80</a></div></div>
<div class="ttc" id="aglcorearb_8h_html_a8922a680b00df660c57f47c1971d04c5"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a8922a680b00df660c57f47c1971d04c5">data</a></div><div class="ttdeci">GLboolean * data</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00298">glcorearb.h:298</a></div></div>
<div class="ttc" id="aclasso2_1_1tof_1_1TOFChannelData_html_aec9a4bf9c9cd1a976392f5ee9c0ef343"><div class="ttname"><a href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#aec9a4bf9c9cd1a976392f5ee9c0ef343">o2::tof::TOFChannelData::hasEnoughData</a></div><div class="ttdeci">bool hasEnoughData(int minEntries) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dff/TOFChannelCalibrator_8cxx_source.html#l00116">TOFChannelCalibrator.cxx:116</a></div></div>
<div class="ttc" id="aclasso2_1_1tof_1_1Geo_html_a5d8b7a738f21dab9a08dc53c5de6d5fe"><div class="ttname"><a href="../../d7/d70/classo2_1_1tof_1_1Geo.html#a5d8b7a738f21dab9a08dc53c5de6d5fe">o2::tof::Geo::NPADS</a></div><div class="ttdeci">static constexpr Int_t NPADS</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9f/TOF_2base_2include_2TOFBase_2Geo_8h_source.html#l00074">Geo.h:74</a></div></div>
<div class="ttc" id="aclasso2_1_1tof_1_1TOFChannelData_html_af539ee62d5961e7895bad7a627b20f89"><div class="ttname"><a href="../../d1/d07/classo2_1_1tof_1_1TOFChannelData.html#af539ee62d5961e7895bad7a627b20f89">o2::tof::TOFChannelData::printEntries</a></div><div class="ttdeci">void printEntries() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dff/TOFChannelCalibrator_8cxx_source.html#l00212">TOFChannelCalibrator.cxx:212</a></div></div>
<div class="ttc" id="astructo2_1_1calibration_1_1Utils_html"><div class="ttname"><a href="../../d1/d7c/structo2_1_1calibration_1_1Utils.html">o2::calibration::Utils</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de0/Detectors_2Calibration_2include_2DetectorsCalibration_2Utils_8h_source.html#l00030">Utils.h:30</a></div></div>
<div class="ttc" id="aclasso2_1_1tof_1_1CalibTOFapi_html_a785c71a70e06703e36dd6d4d08581449"><div class="ttname"><a href="../../d9/d0d/classo2_1_1tof_1_1CalibTOFapi.html#a785c71a70e06703e36dd6d4d08581449">o2::tof::CalibTOFapi::getTimeCalibration</a></div><div class="ttdeci">float getTimeCalibration(int ich, float tot)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d35/CalibTOFapi_8cxx_source.html#l00091">CalibTOFapi.cxx:91</a></div></div>
<div class="ttc" id="aclasso2_1_1calibration_1_1TimeSlot_html"><div class="ttname"><a href="../../d8/df5/classo2_1_1calibration_1_1TimeSlot.html">o2::calibration::TimeSlot</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d77/TimeSlot_8h_source.html#l00028">TimeSlot.h:28</a></div></div>
<div class="ttc" id="aclasso2_1_1tof_1_1Geo_html_a1b8f91c6018f30830cdb591dc84244bb"><div class="ttname"><a href="../../d7/d70/classo2_1_1tof_1_1Geo.html#a1b8f91c6018f30830cdb591dc84244bb">o2::tof::Geo::NSECTORS</a></div><div class="ttdeci">static constexpr Int_t NSECTORS</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9f/TOF_2base_2include_2TOFBase_2Geo_8h_source.html#l00082">Geo.h:82</a></div></div>
<div class="ttc" id="atest__ctf__io__mch_8cxx_html_a9fe08f746eb3ba0d4264abf9b0f4f6be"><div class="ttname"><a href="../../db/dff/test__ctf__io__mch_8cxx.html#a9fe08f746eb3ba0d4264abf9b0f4f6be">LOG</a></div><div class="ttdeci">LOG(INFO)&lt;&lt; &quot;Compressed in &quot;&lt;&lt; sw.CpuTime()&lt;&lt; &quot; s&quot;</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_051dca18e802f8e9474f2e30d29c04e0.html">Detectors</a></li><li class="navelem"><a class="el" href="../../dir_577c839d346a264df4e9e588ca2a45dd.html">TOF</a></li><li class="navelem"><a class="el" href="../../dir_7559d374f7e4089a12282edb4b89411f.html">calibration</a></li><li class="navelem"><a class="el" href="../../dir_433e21cb2528786b2d3a126cc8ab6bdb.html">src</a></li><li class="navelem"><a class="el" href="../../d9/dff/TOFChannelCalibrator_8cxx.html">TOFChannelCalibrator.cxx</a></li>
    <li class="footer">Generated on Sun May 30 2021 06:29:28 for Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
